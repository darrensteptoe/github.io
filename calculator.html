<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campaign Probability Calculator — Darren Steptoe</title>
  <meta name="description" content="Campaign Probability & Risk Model." />

  <!-- Keep this page out of search engines -->
  <meta name="robots" content="noindex, nofollow, noarchive" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="color-scheme" content="light dark" />

  <!-- Optional: keep your global site CSS loaded -->
  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* ==========================================================================
      Campaign Calculator — page-scoped styles (won’t affect the rest of your site)
      ========================================================================== */

    :root{
      --calc-bg: #f3f6fb;
      --calc-grid: rgba(20, 40, 70, 0.04);

      --card: #ffffff;
      --card-border: rgba(17,17,17,0.10);
      --shadow: 0 18px 40px rgba(16, 35, 70, 0.10);
      --shadow-soft: 0 10px 24px rgba(16, 35, 70, 0.08);

      --text: #0f172a;
      --muted: rgba(15, 23, 42, 0.65);

      --blue: #1f86ff;
      --blue-deep: #176fe0;

      --radius-xl: 26px;
      --radius-lg: 18px;
      --radius-md: 14px;

      --gap-lg: 18px;     /* section spacing */
      --gap-md: 14px;     /* internal spacing */
      --gap-input: 16px;  /* IMPORTANT: space between input boxes */
    }

    body{
      margin: 0;
      color: var(--text);
      background:
        linear-gradient(transparent 39px, var(--calc-grid) 40px),
        linear-gradient(90deg, transparent 39px, var(--calc-grid) 40px),
        var(--calc-bg);
      background-size: 40px 40px;
    }

    .calc-page{
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 34px 16px 18px;
    }

    .calc-shell{
      width: min(520px, 100%);
      background: rgba(255,255,255,0.78);
      border: 1px solid rgba(17,17,17,0.06);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow);
      padding: 18px 18px 16px;
      backdrop-filter: blur(6px);
    }

    .calc-header-pill{
      background: linear-gradient(180deg, var(--blue), var(--blue-deep));
      color: #fff;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 800;
      font-size: 14px;
      letter-spacing: 0.2px;
      text-align: center; /* CENTERED title text (you asked for this) */
      box-shadow: 0 14px 30px rgba(31, 134, 255, 0.22);
      margin: 4px 6px 14px;
    }

    .quickstart{
      background: #f6f8fc;
      border: 1px solid rgba(17,17,17,0.06);
      border-radius: var(--radius-lg);
      padding: 12px 14px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
      margin: 0 6px var(--gap-lg);
    }
    .quickstart b{ color: var(--text); }

    .section{
      background: var(--card);
      border: 1px solid var(--card-border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 14px;
      margin: 0 6px var(--gap-lg);
    }

    .section-title{
      font-size: 10px;
      letter-spacing: 2.4px;
      text-transform: uppercase;
      color: rgba(15,23,42,0.55);
      font-weight: 900;
      margin: 2px 0 12px;
    }

    /* MODE CONTROLS */
    .mode-grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .mode-item{
      display: grid;
      grid-template-columns: 18px 1fr;
      gap: 10px;
      align-items: start;
      background: #f4f7fb;
      border: 1px solid rgba(17,17,17,0.06);
      border-radius: 14px;
      padding: 10px 10px;
    }

    .mode-item input{
      margin-top: 2px;
      width: 14px;
      height: 14px;
      accent-color: var(--blue);
    }

    .mode-item .label{
      font-weight: 800;
      font-size: 12px;
      margin: 0 0 2px;
    }

    .mode-item .desc{
      margin: 0;
      font-size: 11px;
      color: var(--muted);
      line-height: 1.25;
    }

    .mode-note{
      margin-top: 10px;
      font-size: 11px;
      color: var(--muted);
      line-height: 1.3;
    }
    .mode-note b{ color: var(--text); }

    /* INPUTS (this is where “boxes touching” gets fixed) */
    .inputs-grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap-input); /* ✅ guarantees space between boxes */
      align-items: start;
    }

    .field{
      display: grid;
      gap: 8px;
      min-width: 0;
    }

    .field label{
      font-size: 11px;
      font-weight: 800;
      color: rgba(15,23,42,0.85);
      line-height: 1.15;
    }

    .field input{
      width: 100%;
      box-sizing: border-box;
      height: 40px;
      padding: 0 12px;
      border-radius: 12px;
      border: 1px solid rgba(17,17,17,0.10);
      background: #f5f8fc;
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
      outline: none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.9);
    }

    .field input::placeholder{
      color: rgba(15,23,42,0.35);
      font-weight: 600;
    }

    .field input:focus{
      border-color: rgba(31,134,255,0.55);
      box-shadow:
        0 0 0 3px rgba(31,134,255,0.18),
        inset 0 1px 0 rgba(255,255,255,0.9);
      background: #f7faff;
    }

    .helper{
      margin: 0 0 10px;
      font-size: 11px;
      color: var(--muted);
      line-height: 1.25;
    }

    .run-wrap{
      display: grid;
      place-items: center;
      padding: 8px 6px 4px;
    }

    .run-btn{
      border: 0;
      cursor: pointer;
      border-radius: 999px;
      padding: 12px 26px;
      font-weight: 900;
      font-size: 12px;
      letter-spacing: 0.2px;
      color: #fff;
      background: linear-gradient(180deg, var(--blue), var(--blue-deep));
      box-shadow: 0 16px 34px rgba(31,134,255,0.28);
      transition: transform 0.08s ease, box-shadow 0.12s ease;
    }

    .run-btn:active{
      transform: translateY(1px);
      box-shadow: 0 12px 26px rgba(31,134,255,0.24);
    }

    .copyright{
      text-align: center;
      font-size: 12px;
      color: rgba(15,23,42,0.55);
      margin-top: 10px;
      padding-top: 10px;
    }

    /* Responsive: stack fields with generous spacing */
    @media (max-width: 560px){
      .mode-grid{ grid-template-columns: 1fr; }
      .inputs-grid{ grid-template-columns: 1fr; gap: 14px; }
      .calc-shell{ padding: 16px 14px 14px; }
      .section{ margin-left: 0; margin-right: 0; }
      .quickstart{ margin-left: 0; margin-right: 0; }
      .calc-header-pill{ margin-left: 0; margin-right: 0; }
    }
  </style>
</head>

<body>
  <main class="calc-page">
    <div class="calc-shell">
      <div class="calc-header-pill">Campaign Probability &amp; Risk Model</div>

      <div class="quickstart">
        <b>Quick start:</b> Use your best baseline assumptions, then stress test by raising volatility.
        If persuasion lists feel inflated, enable <b>Institutional Anchoring</b> and set a Movable Share.
        Reference: DEFAULTS.md and EXAMPLES.md.
      </div>

      <section class="section" aria-label="Mode Controls">
        <div class="section-title">Mode Controls</div>

        <div class="mode-grid">
          <div class="mode-item">
            <input type="checkbox" checked />
            <div>
              <p class="label">Probability Simulation</p>
              <p class="desc">Runs thousands of simulated elections to estimate win probability.</p>
            </div>
          </div>

          <div class="mode-item">
            <input type="checkbox" checked />
            <div>
              <p class="label">Margin Distribution</p>
              <p class="desc">Shows average margin, worst case, best case, and volatility.</p>
            </div>
          </div>

          <div class="mode-item">
            <input type="checkbox" checked />
            <div>
              <p class="label">Sensitivity Analysis</p>
              <p class="desc">Shows which variable moves probability most (+1% test).</p>
            </div>
          </div>

          <div class="mode-item">
            <input type="checkbox" checked />
            <div>
              <p class="label">Diagnostics</p>
              <p class="desc">Flags aggressive assumptions or structural deficits.</p>
            </div>
          </div>

          <div class="mode-item">
            <input type="checkbox" />
            <div>
              <p class="label">Institutional Anchoring</p>
              <p class="desc">Filters persuadables if “undecided” voters are socially locked in.</p>
            </div>
          </div>

          <div class="mode-item">
            <input type="checkbox" checked />
            <div>
              <p class="label">Volatility Inputs</p>
              <p class="desc">Controls uncertainty applied to each variable.</p>
            </div>
          </div>
        </div>

        <p class="mode-note">
          Turn off <b>Probability Simulation</b> for deterministic-only math.
          Distribution and sensitivity are disabled without simulation.
        </p>
      </section>

      <section class="section" aria-label="Core Inputs">
        <div class="section-title">Core Inputs</div>

        <div class="inputs-grid">
          <div class="field">
            <label for="registered">Total Registered Voters</label>
            <input id="registered" type="number" inputmode="numeric" placeholder="0" />
          </div>

          <div class="field">
            <label for="turnout">Expected Turnout %</label>
            <input id="turnout" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="buffer">Safety Buffer % (added cushion)</label>
            <input id="buffer" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="base">Base Vote Secured (committed votes)</label>
            <input id="base" type="number" inputmode="numeric" placeholder="0" />
          </div>
        </div>
      </section>

      <section class="section" aria-label="Persuasion & GOTV">
        <div class="section-title">Persuasion &amp; GOTV</div>

        <div class="inputs-grid">
          <div class="field" style="grid-column: 1 / -1;">
            <label for="persuasion_universe">Persuasion Universe Size</label>
            <input id="persuasion_universe" type="number" inputmode="numeric" placeholder="0" />
          </div>

          <div class="field">
            <label for="contact_rate">Contact Rate % (of persuasion universe reached)</label>
            <input id="contact_rate" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="conversion">Persuasion Conversion % (of contacted, flipped)</label>
            <input id="conversion" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="gotv_universe">GOTV Universe Size</label>
            <input id="gotv_universe" type="number" inputmode="numeric" placeholder="0" />
          </div>

          <div class="field">
            <label for="gotv_conv">GOTV Conversion % (of GOTV universe turned out)</label>
            <input id="gotv_conv" type="number" inputmode="decimal" placeholder="0" />
          </div>
        </div>
      </section>

      <section class="section" aria-label="Volatility Inputs">
        <div class="section-title">Volatility Inputs</div>
        <p class="helper">Standard deviation used in simulation. Higher = more uncertainty.</p>

        <div class="inputs-grid">
          <div class="field">
            <label for="v_turnout">Turnout Volatility % (std dev)</label>
            <input id="v_turnout" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="v_contact">Contact Volatility % (std dev)</label>
            <input id="v_contact" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="v_persuasion">Persuasion Volatility % (std dev)</label>
            <input id="v_persuasion" type="number" inputmode="decimal" placeholder="0" />
          </div>

          <div class="field">
            <label for="v_gotv">GOTV Volatility % (std dev)</label>
            <input id="v_gotv" type="number" inputmode="decimal" placeholder="0" />
          </div>
        </div>
      </section>

      <div class="run-wrap">
        <button class="run-btn" type="button">Run Model</button>
      </div>

      <div class="copyright">© <span id="year"></span> Darren Steptoe. All rights reserved.</div>
    </div>
  </main>

  <script>
    // footer year
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
